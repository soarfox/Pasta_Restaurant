import{p as r}from"./productsStore-17cf5cab.js";import{_,m as u,u as h,a as p,o as n,c as a,b as t,F as m,f,t as e,e as d}from"./index-6b9a18ff.js";const I={data(){return{}},methods:{...u(r,["postItemToPay"]),...u(r,["getItemsFromCart"]),async payOrder(s){const o=h();await this.postItemToPay(s),this.orderStatus!==void 0?(o.success("付款成功！"),this.getItemsFromCart(),this.$router.push({path:"paymentCompleted"})):console.log("訂單付款時發生錯誤!")}},computed:{...p(r,["itemsInCart","orderResult","userOrderInfo","orderStatus"]),totalPrice(){return!this.itemsInCart||!this.itemsInCart.carts?0:this.itemsInCart.carts.reduce((o,i)=>o+i.final_total,0)}}},y=t("ul",{class:"steps"},[t("li",null,[d("Step1. "),t("span",null,"建立訂單")]),t("li",{class:"current-step"},[d("Step2. "),t("span",null,"確認付款")]),t("li",null,[d("Step3. "),t("span",null,"完成訂購")])],-1),b={class:"cart-tables"},g={class:"cart-list"},C=t("div",{class:"title"},"訂單明細",-1),O={class:"order"},P={class:"product-img"},S=["src"],T={class:"product-name"},$={class:"product-quantity"},v={class:"product-price"},R={class:"tfoot"},k={class:"totalPrice"},F=t("td",null,"總計",-1),N={class:"payment-userInfo"},B={class:"paymentTable"},V={class:"fields"},q=t("td",null,"訂單時間：",-1),w={class:"fields"},E=t("td",null,"訂單編號：",-1),A={class:"fields"},D=t("td",null,"付款狀態：",-1),L={class:"userInfoTable"},U={class:"fields"},j=t("td",null,"收件人姓名：",-1),z={class:"fields"},G=t("td",null,"收件人Email：",-1),H={class:"fields"},J=t("td",null,"收件人電話：",-1),K={class:"fields"},M=t("td",null,"收件地址：",-1),Q={class:"fields"},W=t("td",null,"附註：",-1);function X(s,o,i,Y,Z,c){return n(),a("main",null,[y,t("div",b,[t("div",g,[C,t("table",O,[t("tbody",null,[(n(!0),a(m,null,f(s.itemsInCart.carts,l=>(n(),a("tr",{key:l.id},[t("td",P,[t("img",{src:l.product.imageUrl,alt:""},null,8,S)]),t("td",T,e(l.product.title),1),t("td",$,"數量："+e(l.qty),1),t("td",v,"NT$ "+e(l.final_total),1)]))),128))]),t("tfoot",R,[t("tr",k,[F,t("td",null,"NT$ "+e(c.totalPrice),1)])])])]),t("div",N,[t("table",B,[t("tr",V,[q,t("td",null,e(s.orderResult.create_at),1)]),t("tr",w,[E,t("td",null,e(s.orderResult.orderId),1)]),t("tr",A,[D,t("td",null,"尚未付款，共"+e(s.orderResult.total)+"元",1)])]),t("table",L,[t("tr",U,[j,t("td",null,e(s.userOrderInfo.user.name),1)]),t("tr",z,[G,t("td",null,e(s.userOrderInfo.user.email),1)]),t("tr",H,[J,t("td",null,e(s.userOrderInfo.user.tel),1)]),t("tr",K,[M,t("td",null,e(s.userOrderInfo.user.address),1)]),t("tr",Q,[W,t("td",null,e(s.userOrderInfo.message),1)])]),t("button",{type:"button",name:"submit",class:"submit-btn",onClick:o[0]||(o[0]=l=>c.payOrder(s.orderResult.orderId))},"確認付款")])])])}const st=_(I,[["render",X]]);export{st as default};
