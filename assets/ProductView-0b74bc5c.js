import{p as c}from"./productsStore-17cf5cab.js";import{_ as v,m as h,u as S,a as B,r as f,o,c as r,b as s,g as p,d,e as g,F as P,f as T,h as N,w,t as n,j as z}from"./index-6b9a18ff.js";const b="/Pasta_Restaurant/assets/loading_flaticon-025d4cca.png",I={data(){return{isLoadingNow:!0,selectedCategory:"",addToCartStatus:{},categories:[{chineseName:"全部",englishName:""},{chineseName:"爽口青醬",englishName:"PestoPasta"},{chineseName:"酸甜紅醬",englishName:"TomatoPasta"},{chineseName:"香醇白醬",englishName:"CreamyPasta"}],showProducts:{},isRegularStyle:[!0,!0,!1,!0,!0,!1,!0,!0,!1,!0,!0,!1],addProductData:{product_id:"",qty:""},pastaCategoryCount:{pestoCount:"",tomatoCount:"",creamyCount:""}}},methods:{fillLikeIcon(t){this.isRegularStyle[t]=!this.isRegularStyle[t]},...h(c,["getAllProductsAction"]),...h(c,["postItemToCart"]),...h(c,["getItemsFromCart"]),...h(c,["setProductCategory"]),async addProductToCart(t,m){this.addToCartStatus[t]=!0;const l=S();this.addProductData.product_id=t,this.addProductData.qty=m,await this.postItemToCart(this.addProductData),this.addToCartStatus[t]=!1,l.success("已加入購物車！"),this.getItemsFromCart()},async setCategoryToStore(t){this.selectedCategory=t,console.log(this.selectedCategory),await this.setProductCategory(t)}},computed:{heartIcon(){return this.isRegularStyle.map(t=>t?["far","heart"]:["fas","heart"])},...B(c,["productCategory","categorizedProducts","sortProductsByCategory"]),getCategoryCount(){return{"":this.sortProductsByCategory.length,PestoPasta:this.pastaCategoryCount.pestoCount,TomatoPasta:this.pastaCategoryCount.tomatoCount,CreamyPasta:this.pastaCategoryCount.creamyCount}}},mounted(){},watch:{categorizedProducts:{immediate:!0,handler(t){t.PestoPasta&&(this.pastaCategoryCount.pestoCount=t.PestoPasta.length),t.TomatoPasta&&(this.pastaCategoryCount.tomatoCount=t.TomatoPasta.length),t.CreamyPasta&&(this.pastaCategoryCount.creamyCount=t.CreamyPasta.length)}},productCategory:{immediate:!0,handler(t){t==="PestoPasta"?this.showProducts=this.categorizedProducts.PestoPasta:t==="TomatoPasta"?this.showProducts=this.categorizedProducts.TomatoPasta:t==="CreamyPasta"?this.showProducts=this.categorizedProducts.CreamyPasta:this.showProducts=this.sortProductsByCategory}}},beforeRouteEnter(t,m,l){l(async y=>{const a=y;a.sortProductsByCategory.length===0&&await a.getAllProductsAction(),a.productCategory==="CreamyPasta"?a.showProducts=await a.categorizedProducts.CreamyPasta:a.productCategory==="TomatoPasta"?a.showProducts=await a.categorizedProducts.TomatoPasta:a.productCategory==="PestoPasta"?a.showProducts=await a.categorizedProducts.PestoPasta:a.showProducts=a.sortProductsByCategory,a.isLoadingNow=!1,a.selectedCategory=a.productCategory})}},L=s("header",{class:"header",id:"header"},[s("div",{class:"product-banner","aria-label":"大理石桌面上正中央擺著一碗尚未煮的蝴蝶形義大利麵, 其碗的左側散落在桌面上的是筆管麵, 兩顆牛蕃茄和一些蝴蝶形義大利麵, 其碗的右側散落在桌面上的是幾塊起司丁, 幾顆橄欖果實和幾株九層塔"})],-1),R={key:0,class:"loading-container"},A=s("img",{src:b,alt:"loading icon",class:"loading-image"},null,-1),D=[A],x={class:"cart"},F={class:"categories"},q={class:"text"},E={class:"meal-menu"},j={class:"meal-info"},U={class:"meal-cards"},V={class:"heartBtn"},G=["src"],H={class:"title"},J={class:"eng-title"},K=s("div",{class:"border-line"},null,-1),M={class:"price"},O=["onClick"],Q={class:"adding-animation"};function W(t,m,l,y,a,i){const u=f("font-awesome-icon"),_=f("router-link");return o(),r(P,null,[L,s("main",null,[a.isLoadingNow?(o(),r("div",R,D)):p("",!0),s("div",x,[s("div",F,[s("div",q,[d(u,{icon:"fa-solid fa-trophy",class:"trophy"}),g(" 美味分類 ")]),s("ul",E,[(o(!0),r(P,null,T(a.categories,e=>(o(),r("li",{key:e.id,class:N({selected:a.selectedCategory===e.englishName})},[d(_,{to:"/product",onClick:C=>i.setCategoryToStore(e.englishName)},{default:w(()=>[g(n(e.chineseName)+"("+n(i.getCategoryCount[e.englishName])+") ",1)]),_:2},1032,["onClick"])],2))),128))])]),s("div",j,[s("ul",U,[(o(!0),r(P,null,T(a.showProducts,(e,C)=>(o(),r("li",{key:e.id},[s("button",V,[d(u,{icon:i.heartIcon[C],onClick:k=>i.fillLikeIcon(C)},null,8,["icon","onClick"])]),d(_,{to:"/detailedProduct/"+e.id},{default:w(()=>[s("img",{class:"meal-img",src:e.imageUrl,alt:"左邊是一大把的美生菜, 右邊是一個雙層牛肉漢堡, 漢堡裡面夾雜著一片起司與幾片新鮮番茄"},null,8,G)]),_:2},1032,["to"]),s("div",H,n(e.title),1),s("div",J,n(e.category),1),K,s("div",M,[d(u,{icon:"fa-solid fa-dollar-sign",class:"dollar-sign"}),g(" "+n(e.price),1)]),s("button",{name:"add-cart",class:"add-cart",onClick:k=>i.addProductToCart(e.id,1)},[s("div",Q,[s("div",{class:N({"cart-loading-icon":a.addToCartStatus[e.id]})},null,2)]),a.addToCartStatus[e.id]?p("",!0):(o(),z(u,{key:0,icon:"fa-solid fa-cart-shopping",class:"small-cart-icon"})),g(" 加入購物車 ")],8,O)]))),128))])])])])],64)}const Z=v(I,[["render",W]]);export{Z as default};
