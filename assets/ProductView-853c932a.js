import{p as i}from"./productsStore-d1f24022.js";import{_ as v,m as u,u as k,a as S,r as _,o as e,c as r,b as s,g as f,d as c,e as h,F as C,f as p,h as T,w as N,t as d,j as z}from"./index-861aa8bb.js";const B="/Pasta_Restaurant/assets/loading_flaticon-025d4cca.png",b={data(){return{isLoadingNow:!0,selectedCategory:"",addToCartStatus:{},categories:[{chineseName:"全部分類",englishName:""},{chineseName:"爽口青醬",englishName:"PestoPasta"},{chineseName:"酸甜紅醬",englishName:"TomatoPasta"},{chineseName:"香醇白醬",englishName:"CreamyPasta"}],showProducts:{},addProductData:{product_id:"",qty:""},pastaCategoryCount:{pestoCount:"",tomatoCount:"",creamyCount:""}}},methods:{fillLikeIcon(t){this.isRegularStyle[t]=!this.isRegularStyle[t]},...u(i,["getAllProductsAction"]),...u(i,["postItemToCart"]),...u(i,["getItemsFromCart"]),...u(i,["setProductCategory"]),async addProductToCart(t,g){this.addToCartStatus[t]=!0;const n=k();this.addProductData.product_id=t,this.addProductData.qty=g,await this.postItemToCart(this.addProductData),this.addToCartStatus[t]=!1,n.success("已加入購物車！"),this.getItemsFromCart()},async setCategoryToStore(t){this.selectedCategory=t,await this.setProductCategory(t)}},computed:{heartIcon(){return this.isRegularStyle.map(t=>t?["far","heart"]:["fas","heart"])},...S(i,["productCategory","categorizedProducts","sortProductsByCategory"]),getCategoryCount(){return{"":this.sortProductsByCategory.length,PestoPasta:this.pastaCategoryCount.pestoCount,TomatoPasta:this.pastaCategoryCount.tomatoCount,CreamyPasta:this.pastaCategoryCount.creamyCount}}},mounted(){},watch:{categorizedProducts:{immediate:!0,handler(t){t.PestoPasta&&(this.pastaCategoryCount.pestoCount=t.PestoPasta.length),t.TomatoPasta&&(this.pastaCategoryCount.tomatoCount=t.TomatoPasta.length),t.CreamyPasta&&(this.pastaCategoryCount.creamyCount=t.CreamyPasta.length)}},productCategory:{immediate:!0,handler(t){t==="PestoPasta"?this.showProducts=this.categorizedProducts.PestoPasta:t==="TomatoPasta"?this.showProducts=this.categorizedProducts.TomatoPasta:t==="CreamyPasta"?this.showProducts=this.categorizedProducts.CreamyPasta:this.showProducts=this.sortProductsByCategory}}},beforeRouteEnter(t,g,n){n(async P=>{const a=P;a.sortProductsByCategory.length===0&&await a.getAllProductsAction(),a.productCategory==="CreamyPasta"?a.showProducts=await a.categorizedProducts.CreamyPasta:a.productCategory==="TomatoPasta"?a.showProducts=await a.categorizedProducts.TomatoPasta:a.productCategory==="PestoPasta"?a.showProducts=await a.categorizedProducts.PestoPasta:a.showProducts=a.sortProductsByCategory,a.isLoadingNow=!1,a.selectedCategory=a.productCategory})}},x=s("header",{class:"header",id:"header"},[s("div",{class:"product-banner","aria-label":"大理石桌面上正中央擺著一碗尚未煮的蝴蝶形義大利麵, 其碗的左側散落在桌面上的是筆管麵, 兩顆牛蕃茄和一些蝴蝶形義大利麵, 其碗的右側散落在桌面上的是幾塊起司丁, 幾顆橄欖果實和幾株九層塔"})],-1),A={key:0,class:"loading-container"},D=s("img",{src:B,alt:"loading icon",class:"loading-image"},null,-1),L=[D],R={class:"cart"},F={class:"categories"},I={class:"text"},q={class:"meal-menu"},E={class:"meal-info"},j={class:"meal-cards"},U=["src"],V={class:"title"},G={class:"eng-title"},H=s("div",{class:"border-line"},null,-1),J={class:"price"},K=["onClick"],M={class:"adding-animation"};function O(t,g,n,P,a,m){const l=_("font-awesome-icon"),y=_("router-link");return e(),r(C,null,[x,s("main",null,[a.isLoadingNow?(e(),r("div",A,L)):f("",!0),s("div",R,[s("div",F,[s("div",I,[c(l,{icon:"fa-solid fa-trophy",class:"trophy"}),h(" 美味餐點 "),c(l,{icon:"fa-solid fa-trophy",class:"trophy"})]),s("ul",q,[(e(!0),r(C,null,p(a.categories,o=>(e(),r("li",{key:o.id,class:T({selected:a.selectedCategory===o.englishName})},[c(y,{to:"/product",onClick:w=>m.setCategoryToStore(o.englishName)},{default:N(()=>[h(d(o.chineseName)+"("+d(m.getCategoryCount[o.englishName])+") ",1)]),_:2},1032,["onClick"])],2))),128))])]),s("div",E,[s("ul",j,[(e(!0),r(C,null,p(a.showProducts,o=>(e(),r("li",{key:o.id},[c(y,{to:"/detailedProduct/"+o.id},{default:N(()=>[s("img",{class:"meal-img",src:o.imageUrl,alt:"左邊是一大把的美生菜, 右邊是一個雙層牛肉漢堡, 漢堡裡面夾雜著一片起司與幾片新鮮番茄"},null,8,U)]),_:2},1032,["to"]),s("div",V,d(o.title),1),s("div",G,d(o.category),1),H,s("div",J,[c(l,{icon:"fa-solid fa-dollar-sign",class:"dollar-sign"}),h(" "+d(o.price),1)]),s("button",{name:"add-cart",class:"add-cart",onClick:w=>m.addProductToCart(o.id,1)},[s("div",M,[s("div",{class:T({"cart-loading-icon":a.addToCartStatus[o.id]})},null,2)]),a.addToCartStatus[o.id]?f("",!0):(e(),z(l,{key:0,icon:"fa-solid fa-cart-shopping",class:"small-cart-icon"})),h(" 加入購物車 ")],8,K)]))),128))])])])])],64)}const X=v(b,[["render",O]]);export{X as default};
